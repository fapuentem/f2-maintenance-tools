#+TITLE: Monthly Jetson Orin Health Check
#+DATE:<2025-04-03 Thu>

* Device: <hostname_or_IP_address_1>
#+BEGIN_SRC bash
  get_formatted_mac() {
    # Extract MAC address from 'ifconfig' command's output
    local mac_address=$(ifconfig eth2 | grep 'ether' | awk '{print $2}')

    # Replace ':' with nothing to get the required format
    local formatted_mac_address=$(echo "$mac_address" | tr -d ':')

    # Add 'f2_' prefix to the MAC address
    local result="f2_$formatted_mac_address"

    # Print the result (useful for capturing return value)
    echo "$result"
   }
  # Get F2 id
  f2_formatted_mac=$(get_formatted_mac)
  echo "$f2_formatted_mac"
#+END_SRC

#+RESULTS:
: f2_48b02df7a486

** System Resource Monitoring [5/5]
- [X] CPU Usage:
   #+BEGIN_SRC bash
     top -bn1 | grep '^%Cpu' | awk '{print $2}'
   #+END_SRC

   #+RESULTS:
   : 1.5

- [X] Memory Usage:
   #+BEGIN_SRC sh
     free -h
   #+END_SRC

   #+RESULTS:
   | total | used  | free  | shared | buff/cache | available |       |
   | Mem:  | 7.3Gi | 843Mi | 2.9Gi  | 36Mi       | 3.6Gi     | 6.2Gi |
   | Swap: | 3.6Gi | 0B    | 3.6Gi  |            |           |       |

- [X] Disk Usage:
   #+BEGIN_SRC sh
     df -h
   #+END_SRC

   #+RESULTS:
   | Filesystem     | Size | Used | Avail | Use% | Mounted           | on |
   | /dev/nvme0n1p1 | 116G | 7.3G | 103G  |   7% | /                 |    |
   | none           | 3.6G | 0    | 3.6G  |   0% | /dev              |    |
   | tmpfs          | 3.7G | 0    | 3.7G  |   0% | /dev/shm          |    |
   | tmpfs          | 748M | 35M  | 713M  |   5% | /run              |    |
   | tmpfs          | 5.0M | 4.0K | 5.0M  |   1% | /run/lock         |    |
   | tmpfs          | 3.7G | 0    | 3.7G  |   0% | /sys/fs/cgroup    |    |
   | tmpfs          | 748M | 16K  | 748M  |   1% | /run/user/124     |    |
   | tmpfs          | 748M | 8.0K | 748M  |   1% | /run/user/1000    |    |
   | /dev/loop1     | 39M  | 39M  | 0     | 100% | /snap/snapd/23772 |    |
   | /dev/loop2     | 62M  | 62M  | 0     | 100% | /snap/core24/741  |    |
   | /dev/loop3     | 382M | 382M | 0     | 100% | /snap/emacs/2792  |    |

- [X] Disk I/O:
   #+BEGIN_SRC bash
     iostat -d -k 1 1
   #+END_SRC

   #+RESULTS:

- [X] Network Interface Status:
   #+BEGIN_SRC bash
     ip a
   #+END_SRC

   #+RESULTS:
   | 1:            | lo:                         | <LOOPBACK,UP,LOWER_UP>              | mtu               |         65536 | qdisc  | noqueue    | state         | UNKNOWN | group | default | qlen  |    1000 |      |      |
   | link/loopback | 00:00:00:00:00:00           | brd                                 | 00:00:00:00:00:00 |               |        |            |               |         |       |         |       |         |      |      |
   | inet          | 127.0.0.1/8                 | scope                               | host              |            lo |        |            |               |         |       |         |       |         |      |      |
   | valid_lft     | forever                     | preferred_lft                       | forever           |               |        |            |               |         |       |         |       |         |      |      |
   | inet6         | ::1/128                     | scope                               | host              |               |        |            |               |         |       |         |       |         |      |      |
   | valid_lft     | forever                     | preferred_lft                       | forever           |               |        |            |               |         |       |         |       |         |      |      |
   | 2:            | dummy0:                     | <BROADCAST,NOARP>                   | mtu               |          1500 | qdisc  | noop       | state         | DOWN    | group | default | qlen  |    1000 |      |      |
   | link/ether    | 12:9e:23:a8:97:71           | brd                                 | ff:ff:ff:ff:ff:ff |               |        |            |               |         |       |         |       |         |      |      |
   | 3:            | eth0:                       | <NO-CARRIER,BROADCAST,MULTICAST,UP> | mtu               |          1500 | qdisc  | pfifo_fast | state         | DOWN    | group | default | qlen  |    1000 |      |      |
   | link/ether    | 00:00:00:00:00:01           | brd                                 | ff:ff:ff:ff:ff:ff |               |        |            |               |         |       |         |       |         |      |      |
   | 4:            | eth1:                       | <NO-CARRIER,BROADCAST,MULTICAST,UP> | mtu               |          1500 | qdisc  | pfifo_fast | state         | DOWN    | group | default | qlen  |    1000 |      |      |
   | link/ether    | 00:00:00:00:00:01           | brd                                 | ff:ff:ff:ff:ff:ff |               |        |            |               |         |       |         |       |         |      |      |
   | 5:            | eth2:                       | <BROADCAST,MULTICAST,UP,LOWER_UP>   | mtu               |          1500 | qdisc  | pfifo_fast | state         | UP      | group | default | qlen  |    1000 |      |      |
   | link/ether    | 48:b0:2d:f7:a4:86           | brd                                 | ff:ff:ff:ff:ff:ff |               |        |            |               |         |       |         |       |         |      |      |
   | altname       | enP8p1s0                    |                                     |                   |               |        |            |               |         |       |         |       |         |      |      |
   | inet          | 192.168.133.3/24            | brd                                 | 192.168.133.255   |         scope | global | dynamic    | noprefixroute | eth2    |       |         |       |         |      |      |
   | valid_lft     | 66409sec                    | preferred_lft                       | 66409sec          |               |        |            |               |         |       |         |       |         |      |      |
   | inet6         | fe80::4b4:1f55:5ffb:3ef0/64 | scope                               | link              | noprefixroute |        |            |               |         |       |         |       |         |      |      |
   | valid_lft     | forever                     | preferred_lft                       | forever           |               |        |            |               |         |       |         |       |         |      |      |
   | 6:            | l4tbr0:                     | <BROADCAST,MULTICAST>               | mtu               |          1500 | qdisc  | noop       | state         | DOWN    | group | default | qlen  |    1000 |      |      |
   | link/ether    | d6:48:13:65:e9:31           | brd                                 | ff:ff:ff:ff:ff:ff |               |        |            |               |         |       |         |       |         |      |      |
   | 7:            | rndis0:                     | <NO-CARRIER,BROADCAST,MULTICAST,UP> | mtu               |          1500 | qdisc  | pfifo_fast | master        | l4tbr0  | state | DOWN    | group | default | qlen | 1000 |
   | link/ether    | d6:48:13:65:e9:31           | brd                                 | ff:ff:ff:ff:ff:ff |               |        |            |               |         |       |         |       |         |      |      |
   | 8:            | usb0:                       | <NO-CARRIER,BROADCAST,MULTICAST,UP> | mtu               |          1500 | qdisc  | pfifo_fast | master        | l4tbr0  | state | DOWN    | group | default | qlen | 1000 |
   | link/ether    | d6:48:13:65:e9:33           | brd                                 | ff:ff:ff:ff:ff:ff |               |        |            |               |         |       |         |       |         |      |      |

   #+BEGIN_SRC bash
     netstat -s | grep -i 'error\\|drop'
   #+END_SRC

   #+RESULTS:

** Jetson Specific Monitoring [2/2]
- [X] GPU Usage:
  #+BEGIN_SRC bash
    tegrastats | head -1
  #+END_SRC

  #+RESULTS:
  | 04-03-2025 16:28:02 RAM 1118/7471MB (lfb 507x4MB) SWAP 0/3736MB (cached 0MB) CPU [1%@729  | 5%@729  | 0%@1420 | 0%@1420 | off | off] EMC_FREQ 0% GR3D_FREQ 0%@[0] CV0@44.843C CPU@46.437C SOC2@46.125C SOC0@46.218C CV1@45.562C GPU@44.281C tj@51.718C SOC1@51.718C CV2@46.718C             |
  | 04-03-2025 15:45:26 RAM 1149/7471MB (lfb 361x4MB) SWAP 0/3736MB (cached 0MB) CPU [3%@1420 | 0%@1420 | 0%@1420 | 4%@1420 | off | off] EMC_FREQ 0% GR3D_FREQ 0%@[0] CV0@48.968C CPU@50.937C iwlwifi@36C SOC2@49.781C SOC0@50.437C CV1@49.875C GPU@48.625C tj@55.062C SOC1@55.062C CV2@49.875C |

- [X] Thermal Monitoring:
  #+BEGIN_SRC bash
    tegrastats | head  -1 | awk '{print $17,$18,$19.$20,$21,$22,$23,$24,$25}'
  #+END_SRC

  #+RESULTS:
  : CV0@44.656C CPU@46.625C SOC2@46.156CSOC0@46.218C CV1@45.562C GPU@44.406C tj@51.406C SOC1@51.406C CV2@46.687C

** Application Specific Monitoring
*** F2_App
 - [ ] Application Process Status (<F2_App>):
   #+BEGIN_SRC bash
     pgrep F2-App
   #+END_SRC

   #+RESULTS:

 - [ ] Application Logs (<F2_App>):
   #+BEGIN_SRC bash
     tail -n 10 /home/nvidia/projects/F2-App/logs/app.log
   #+END_SRC

   #+RESULTS:
   | 2025-04-03 16:33:23 | 092 [DEBUG] - root - f2sensor.py - get_all_data_async - 298 : TVOC: 668                                                                                                |          |         |            |            |            |          |            |          |                                                   |
   | 2025-04-03 16:33:23 | 092 [DEBUG] - root - f2sensor.py - get_all_data_async - 299 : CO2: 568                                                                                                 |          |         |            |            |            |          |            |          |                                                   |
   | 2025-04-03 16:33:23 | 125 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J3/sensor-3> payload: {"timestamp": "2025-04-03 19:33:22.876266" | PM2.5: 0 | PM10: 0 | Temp: 40.2 | Humd: 22.1 | Atm: 102.0 | Lux: 97  | TVOC: 519  | CO2: 650 | raw-data: "00000000019200dd03fc000000610207028a"} |
   | 2025-04-03 16:33:23 | 231 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J3/sensor-4> payload: {"timestamp": "2025-04-03 19:33:22.904025" | PM2.5: 0 | PM10: 0 | Temp: 32.7 | Humd: 26.0 | Atm: 102.0 | Lux: 161 | TVOC: 864  | CO2: 611 | raw-data: "000000000147010403fc000000a103600263"} |
   | 2025-04-03 16:33:23 | 337 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J3/sensor-5> payload: {"timestamp": "2025-04-03 19:33:22.941230" | PM2.5: 0 | PM10: 0 | Temp: 32.2 | Humd: 26.2 | Atm: 102.0 | Lux: 154 | TVOC: 681  | CO2: 552 | raw-data: "000000000142010603fc0000009a02a90228"} |
   | 2025-04-03 16:33:23 | 443 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J4/sensor-1> payload: {"timestamp": "2025-04-03 19:33:22.990898" | PM2.5: 0 | PM10: 0 | Temp: 28.1 | Humd: 27.2 | Atm: 102.0 | Lux: 186 | TVOC: 2768 | CO2: 550 | raw-data: "000000000119011003fc000000ba0ad00226"} |
   | 2025-04-03 16:33:23 | 551 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J4/sensor-2> payload: {"timestamp": "2025-04-03 19:33:23.012712" | PM2.5: 0 | PM10: 0 | Temp: 31.0 | Humd: 26.3 | Atm: 102.0 | Lux: 298 | TVOC: 2249 | CO2: 599 | raw-data: "000000000136010703fc0000012a08c90257"} |
   | 2025-04-03 16:33:23 | 657 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J4/sensor-3> payload: {"timestamp": "2025-04-03 19:33:23.036232" | PM2.5: 0 | PM10: 0 | Temp: 36.0 | Humd: 22.2 | Atm: 102.0 | Lux: 64  | TVOC: 2496 | CO2: 540 | raw-data: "00000000016800de03fc0000004009c0021c"} |
   | 2025-04-03 16:33:23 | 765 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J4/sensor-4> payload: {"timestamp": "2025-04-03 19:33:23.059042" | PM2.5: 0 | PM10: 0 | Temp: 37.7 | Humd: 21.6 | Atm: 102.0 | Lux: 82  | TVOC: 1422 | CO2: 509 | raw-data: "00000000017900d803fc00000052058e01fd"} |
   | 2025-04-03 16:33:23 | 868 [INFO] - __main__ - main.py - task_pub - 437 : Published topic: <tele/f2-48b02df7a486/sensor-mode/J4/sensor-5> payload: {"timestamp": "2025-04-03 19:33:23.093049" | PM2.5: 0 | PM10: 0 | Temp: 41.0 | Humd: 21.2 | Atm: 102.0 | Lux: 136 | TVOC: 668  | CO2: 568 | raw-data: "00000000019a00d403fc00000088029c0238"} |

 - [ ] Application Resource Usage (<F2_App>):
   #+BEGIN_SRC bash
     ps -aux | grep F2-App
   #+END_SRC

   #+RESULTS:
   | root   |    588 | 0.0 | 0.0 |   2060 |   504 | ? | Ss | Feb26 |    0:00 | /bin/sh      | -c                                   | sleep | 150; | /bin/python3 | /home/nvidia/projects/F2-App/main.py |
   | root   |   1833 | 5.5 | 0.3 | 106328 | 24876 | ? | Sl | Feb26 | 2922:35 | /bin/python3 | /home/nvidia/projects/F2-App/main.py |       |      |              |                                      |
   | nvidia | 109100 | 0.0 | 0.0 |   8576 |   632 | ? | S  | 16:36 |    0:00 | grep         | F2-App                               |       |      |              |                                      |

*** F2_App_fanstel_ble
 - [ ] Application Process Status (<F2_App_fanstel_ble>):
   #+BEGIN_SRC bash
     pgrep F2_App_fanstel_ble
   #+END_SRC

 - [ ] Application Logs (<F2_App_fanstel_ble>):
   #+BEGIN_SRC bash
     tail -n 20 /home/nvidia/projects/F2_App_fanstel_ble/logs/app.log
   #+END_SRC

 - [ ] Application Resource Usage (<F2_App_fanstel_ble>):
   #+BEGIN_SRC bash
     ps -aux | grep F2_App_fanstel_ble
   #+END_SRC


** System Health and Configuration
 - [X] System Uptime:
   #+BEGIN_SRC bash
     uptime
   #+END_SRC

   #+RESULTS:
   | 16:37:00 up 36 days | 6:36 | 1 user | load average: 0.09 | 0.08 | 0.08 |

 - [X] System Logs (Errors):
   #+BEGIN_SRC bash
     journalctl -p err | tail -25
   #+END_SRC

   #+RESULTS:
   | Jun | 17 | 17:29:41 | ubuntu | kernel:     | imx219  |      10-0010: | board              | setup   | failed     |          |          |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Timeout            | waiting | for        | PNVM     | load!    |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Failed             | to      | start      | RT       | ucode:   | -110     |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | iwl_trans_send_cmd | bad     | state      | =        | 0        |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Failed             | to      | run        | INIT     | ucode:   | -110     |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | retry              | init    | count      | 0        |          |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Timeout            | waiting | for        | PNVM     | load!    |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Failed             | to      | start      | RT       | ucode:   | -110     |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | iwl_trans_send_cmd | bad     | state      | =        | 0        |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Failed             | to      | run        | INIT     | ucode:   | -110     |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | retry              | init    | count      | 1        |          |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Timeout            | waiting | for        | PNVM     | load!    |          |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Failed             | to      | start      | RT       | ucode:   | -110     |       |
   | Feb | 26 | 09:00:27 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | iwl_trans_send_cmd | bad     | state      | =        | 0        |          |       |
   | Feb | 26 | 09:00:28 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | Failed             | to      | run        | INIT     | ucode:   | -110     |       |
   | Feb | 26 | 09:00:28 | ubuntu | kernel:     | iwlwifi | 0001:01:00.0: | retry              | init    | count      | 2        |          |          |       |
   | Feb | 26 | 09:00:29 | ubuntu | phs[1096]:  | E/      |        nvphs: | Failed             | to      | initialize | sysfs    | readers. | Exiting. |       |
   | Feb | 26 | 09:00:29 | ubuntu | phs[1096]:  | E/      |        nvphs: | Initialization     | Failed! | Entering   | Zombie   | mode     |          |       |
   | Mar | 27 | 16:38:45 | ubuntu | systemd[1]: | Failed  |            to | start              | Refresh | fwupd      | metadata | and      | update   | motd. |
   | Mar | 28 | 00:55:45 | ubuntu | systemd[1]: | Failed  |            to | start              | Refresh | fwupd      | metadata | and      | update   | motd. |
   | Mar | 28 | 06:58:45 | ubuntu | systemd[1]: | Failed  |            to | start              | Refresh | fwupd      | metadata | and      | update   | motd. |
   | Mar | 28 | 19:23:45 | ubuntu | systemd[1]: | Failed  |            to | start              | Refresh | fwupd      | metadata | and      | update   | motd. |
   | Mar | 29 | 14:44:45 | ubuntu | systemd[1]: | Failed  |            to | start              | Refresh | fwupd      | metadata | and      | update   | motd. |
   | Mar | 29 | 21:27:45 | ubuntu | systemd[1]: | Failed  |            to | start              | Refresh | fwupd      | metadata | and      | update   | motd. |
   | Mar | 30 | 11:18:45 | ubuntu | systemd[1]: | Failed  |            to | start              | Refresh | fwupd      | metadata | and      | update   | motd. |
